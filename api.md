# 1. 垃圾分类管理后台接口文档
## 1.1 静态资源
### 1.1.1 图片
- `http://127.0.0.1:3000/image`
### 1.2.1 垃圾分类
- 图片种类: `http://127.0.0.1:3000/tensorflow/wasteName.json`
- 模型: `http://127.0.0.1:3000/tensorflow/model.json`
- 权重: `http://127.0.0.1:3000/tensorflow/weights.bin`
## 1.2 API 接口说明

- 接口地址：`http://127.0.0.1:3000/api/`
- 已开启 CORS 跨域支持
- 需要授权的 API ，在请求头中使用 `Authorization` 字段提供 `token` 令牌
- 数据返回格式统一使用 JSON

## 1.3 登录模块

### 1.3.1 登录验证接口

- 请求路径：login
- 请求方法：post
- 请求参数

| 参数名   | 参数说明 |
| -------- | -------- |
| username | 用户名   | 
| password | 密码     | 

- 响应参数

| 参数名   | 参数说明    |
| -------- | ----------- | 
| token    | 令牌        | 
|username|用户名|

- 响应数据

```json
{
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiaWF0IjoxNjUxOTI0MTk2LCJleHAiOjE2NTIyODQxOTZ9.Pp96a9ZgRPUnSybwzADVUq9QV2A-m41zlge4vm0bIEw",
    "username": "admin"
  },
  "code": 200,
  "message": "登陆成功"
}
```
## 1.4 用户管理
### 1.4.1 用户列表
- 请求路径：frontuser
- 请求方法：get
- 响应数据

```json
{
    "data": [
        {
            "id": 1,
            "username": "admin",
            "password": "123456",
            "role": 1,
            "status": 1,
            "mobile": "12345678901",
            "email": "123456@qq.com",
            "createTime": "2022-04-26T05:38:35.000Z",
            "updateTime": "2022-05-08T12:06:23.000Z"
        },
        ......
    ],
    "code": 200,
    "message": "查询所有用户成功"
}
```
### 1.4.2 添加用户

- 请求路径：frontuser/add
- 请求方法：post
- 请求参数

| 参数名      | 参数说明     |
|----------|----------|
| username | 用户名      | 
| password | 密码       |
| role | 身份       |
| status | 状态       |
| mobile   | 手机号（可为空） | 
| email | 邮箱（可为空）  |


- 响应数据

```json
{
  "data": null,
  "code": 200,
  "message": "登陆成功"
}
```
### 1.4.3 根据ID查询用户

- 请求路径：frontuser/find
- 请求方法：get
- 请求参数

| 参数名      | 参数说明     |
|----------|----------|
| id | 用户ID     | 

- 响应数据

```json
{
    "data": {
        "id": 2,
        "username": "yokyo",
        "password": "123456",
        "role": 1,
        "status": 1,
        "mobile": "12345678902",
        "email": "123456@qq.com",
        "createTime": "2022-04-26T07:05:04.000Z",
        "updateTime": "2022-05-08T06:15:28.000Z"
    },
    "code": 200,
    "message": "查询用户成功"
}
```
### 1.4.4 编辑用户

- 请求路径：frontuser/update
- 请求方法：post
- 请求参数

| 参数名      | 参数说明     |
|----------|----------|
| id | 用户ID     | 
| username | 用户名      | 
| password | 密码       |
| role | 身份       |
| status | 状态       |
| mobile   | 手机号（可为空） | 
| email | 邮箱（可为空）  |


- 响应数据

```json
{
  "data": null,
  "code": 200,
  "message": "更新用户成功"
}
```
### 1.4.5 更改用户状态

- 请求路径：frontuser/update/status
- 请求方法：post
- 请求参数

| 参数名      | 参数说明     |
|----------|----------|
| id | 用户ID     |
| status | 状态       |

- 响应数据

```json
{
  "data": null,
  "code": 200,
  "message": "更新用户状态成功"
}
```
### 1.4.6 删除用户

- 请求路径：frontuser/delete
- 请求方法：post
- 请求参数

| 参数名      | 参数说明     |
|----------|----------|
| id | 用户ID     |

- 响应数据

```json
{
  "data": null,
  "code": 200,
  "message": "删除用户成功"
}
```

## 1.5 垃圾数据管理
### 1.5.1 数据列表
- 请求路径：waste
- 请求方法：get
- 请求参数

| 参数名      | 参数说明                |
|----------|---------------------|
| page     | 页数（pagesize定为50）    | 
| category | 分类名称（可为空，则返回所有类别数据） | 

- 响应数据

```json
{
    "data": [
        {
            "id": 2,
            "name": "阿司匹林",
            "category": 2,
            "createTime": "2021-04-16T02:18:22.000Z",
            "updateTime": "2021-04-16T02:18:22.000Z",
            "searchCount": 0
        },
        ......
      ],
    "code": 200,
    "message": "查询垃圾数据成功"
}       
```
### 1.5.2 查询数量
- 请求路径：waste/count
- 请求方法：get
- 请求参数

| 参数名      | 参数说明                |
|----------|---------------------|
| category | 分类名称（可为空，则返回所有类别数据） | 

- 响应数据

```json
{
    "data": {
        "count": 3977
    },
    "code": 200,
    "message": "查询垃圾数量成功"
}    
```
### 1.5.3 添加垃圾
- 请求路径：waste/add
- 请求方法：post
- 请求参数

| 参数名      | 参数说明 |
|----------|------|
| name | 垃圾名称 | 
| category | 垃圾分类 | 

- 响应数据

```json
{
    "data": null,
    "code": 200,
    "message": "填加数据成功"
}   
```
### 1.5.4 根据id查询垃圾
- 请求路径：waste/find
- 请求方法：get
- 请求参数

| 参数名 | 参数说明 |
|-----|------|
| id  | 垃圾id | 

- 响应数据

```json
{
    "data": {
        "id": 48,
        "name": "爆竹",
        "category": 8,
        "createTime": "2021-04-16T02:18:22.000Z",
        "updateTime": "2021-04-16T02:18:22.000Z",
        "searchCount": 0
    },
    "code": 200,
    "message": "查询垃圾数据成功"
} 
```
### 1.5.5 根据名称查询垃圾
- 请求路径：waste/getbyname
- 请求方法：get
- 请求参数

| 参数名 | 参数说明       |
|-----|------------|
| name | 垃圾名称（模糊查询） | 
| category | 垃圾分类（可为空）  | 

- 响应数据

```json
{
    "data": [
        {
            "id": 2442,
            "name": "鼠标",
            "category": 1,
            "createTime": "2021-04-16T02:18:22.000Z",
            "updateTime": "2021-04-16T02:18:22.000Z",
            "searchCount": 0
        },
        {
            "id": 2690,
            "name": "鼠标垫",
            "category": 8,
            "createTime": "2021-04-16T02:18:22.000Z",
            "updateTime": "2021-04-16T02:18:22.000Z",
            "searchCount": 0
        }
    ],
    "code": 200,
    "message": "查询数据成功"
}
```
### 1.5.6 编辑垃圾数据
- 请求路径：waste/update
- 请求方法：post
- 请求参数

| 参数名      | 参数说明 |
|----------|------|
| name | 垃圾名称 | 
| category | 垃圾分类 | 
| id  | 垃圾id | 

- 响应数据

```json
{
    "data": null,
    "code": 200,
    "message": "更新数据成功"
}   
```
### 1.5.7 删除垃圾
- 请求路径：waste/delete
- 请求方法：post
- 请求参数

| 参数名      | 参数说明 |
|----------|------|
| id  | 垃圾id | 

- 响应数据

```json
{
    "data": null,
    "code": 200,
    "message": "删除数据成功"
}   
```
### 1.5.6 垃圾分类
- 请求路径：waste/category
- 请求方法：get

- 响应数据

```json
{
    "data": [
        {
            "id": 1,
            "typename": "可回收垃圾",
            "content": "可回收物(再生资源)是指回收后经过再加工可以成为生产原料或者经过整理可以再利用的物品，主要包括废纸类、塑料类、玻璃类、金属类、电子废弃物类、织物类等。",
            "createTime": "2022-05-02T03:10:51.000Z",
            "updateTime": "2022-05-02T12:58:24.000Z"
        },
        {
            "id": 2,
            "typename": "有害垃圾",
            "content": "有毒有害垃圾是指存有对人体健康有害的重金属、有毒的物质或者对环境造成现实危害或者潜在危害的废弃物。",
            "createTime": "2022-05-02T03:11:56.000Z",
            "updateTime": "2022-05-02T12:58:28.000Z"
        },
        {
            "id": 4,
            "typename": "厨余垃圾",
            "content": "狭义的厨余垃圾是有机垃圾的一种，分为熟厨余包括剩菜、剩饭、菜叶；生厨余垃圾包括果皮、蛋壳、茶渣、骨、贝壳；泛指家庭生活饮食中所需用的来源生料及成品(熟食)或残留物。但广义的厨余垃圾还包括用过的筷子，食品的包装材料等。",
            "createTime": "2022-05-02T03:12:10.000Z",
            "updateTime": "2022-05-02T12:58:32.000Z"
        },
        {
            "id": 8,
            "typename": "其他垃圾",
            "content": "包括除上述几类垃圾之外难以回收的废弃物，通常根据垃圾特性采取焚烧或者填埋的方式处理。",
            "createTime": "2022-05-02T03:12:27.000Z",
            "updateTime": "2022-05-02T12:58:36.000Z"
        },
        {
            "id": 16,
            "typename": "大件垃圾",
            "content": "大件垃圾",
            "createTime": "2022-05-02T03:12:50.000Z",
            "updateTime": "2022-05-02T12:58:39.000Z"
        },
        {
            "id": 32,
            "typename": "测试",
            "content": "测试垃圾",
            "createTime": "2022-05-02T03:13:42.000Z",
            "updateTime": "2022-05-06T02:34:40.000Z"
        }
    ],
    "code": 200,
    "message": "查询分类成功"
}    
```
**/find ; /update ; /add ; /delete 略**
## 1.6 垃圾题库管理
### 1.6.1 题目列表
- 请求路径：question
- 请求方法：get

- 响应数据

```json
{
    "data": [
        {
            "id": 1,
            "title": "玻璃瓶、玻璃罐等玻璃制品在土壤中的降解速度为（  ）",
            "optionA": "一个月",
            "optionB": "半年",
            "optionC": "500年",
            "optionD": "永远不会降解",
            "daan": "D",
            "createTime": "2022-05-02T13:05:34.000Z",
            "updateTime": "2022-05-02T13:05:34.000Z"
        },
        ......
    ]
    "code": 200,
    "message": "查询垃圾数据成功"
}       
```
### 1.5.2 添加题目
- 请求路径：question/add
- 请求方法：post
- 请求参数

| 参数名     | 参数说明 |
|---------|------|
| title   | 题目名称 | 
| optionA | 选项A  | 
| optionB | 选项B  | 
| optionC | 选项C  | 
| optionD | 选项D  | 
| daan    | 答案   | 

- 响应数据

```json
{
    "data": null,
    "code": 200,
    "message": "添加题目成功"
}   
```
### 1.5.3 根据id获取题目
- 请求路径：question/find
- 请求方法：get
- 请求参数

| 参数名 | 参数说明 |
|-----|------|
| id  | 题目ID |

- 响应数据

```json
{
    "data": {
        "id": 1,
        "title": "玻璃瓶、玻璃罐等玻璃制品在土壤中的降解速度为（  ）",
        "optionA": "一个月",
        "optionB": "半年",
        "optionC": "500年",
        "optionD": "永远不会降解",
        "daan": "D",
        "createTime": "2022-05-02T13:05:34.000Z",
        "updateTime": "2022-05-02T13:05:34.000Z"
    },
    "code": 200,
    "message": "查询题目成功"
}  
```
### 1.5.4 编辑题目
- 请求路径：question/update
- 请求方法：post
- 请求参数

| 参数名     | 参数说明 |
|---------|------|
| id  | 题目ID |
| title   | 题目名称 | 
| optionA | 选项A  | 
| optionB | 选项B  | 
| optionC | 选项C  | 
| optionD | 选项D  | 
| daan    | 答案   | 

- 响应数据

```json
{
    "data": null,
    "code": 200,
    "message": "更改题目成功"
}   
```
### 1.5.5 删除题目
- 请求路径：question/delete
- 请求方法：post
- 请求参数

| 参数名     | 参数说明 |
|---------|------|
| id  | 题目ID |

- 响应数据

```json
{
    "data": null,
    "code": 200,
    "message": "删除题目成功"
}   
```
## 1.7 图片上传
- 请求路径：upload
- 请求方法：post
- 请求参数

| 参数名     | 参数说明 |
|---------|------|
| file  | 上传图片 |
- 响应参数

| 参数名     | 参数说明 |
|---------|------|
| path  | 图片路径 |

- 响应数据

```json
{
    "data": {
        "path": "default+1652020626516.jpg"
    },
    "code": 200,
    "message": "上传图片成功"
} 
```
## 1.8 垃圾文章资讯管理
### 1.8.1 文章列表
- 请求路径：article
- 请求方法：get

- 响应数据

```json
{
    "data": [
        {
            "id": 1,
            "author": "admin",
            "title": "做好垃圾分类这篇“文章”",
            "category": "新闻资讯",
            "introduction": "习近平总书记对垃圾分类做出重要指示，强调实行垃圾分类，关系广大人民群众生活环境，关系节约使用资源，也是社会文明水平的一个重要体现。党员干部要争做垃圾分类的先行者，以身作则，以上率下，带好头，出实招、创新招、使高招，做好垃圾分类这篇“文章”。",
            "content": "    习近平总书记对垃圾分类做出重要指示，强调实行垃圾分类，关系广大人民群众生活环境，关系节约使用资源，也是社会文明水平的一个重要体现。党员干部要争做垃圾分类的先行者，以身作则，以上率下，带好头，出实招、创新招、使高招，做好垃圾分类这篇“文章”。\n    随着时代的发展，垃圾分类刻不容缓。有三座“垃圾大山”给许多城市造成了巨大的压力。“一山”叫垃圾速度增长过快：外卖过度包装、一次性餐具滥用；有的人日常生活讲养生不讲节约，剩菜不能，做饭一堆。“二山”叫做垃圾处理厂发展速度跟不上：扩建没地方，自身消化负荷超载。“三山”叫做垃圾围城：新型垃圾种类多、占地大。面对这三座大山，党员干部用“三招”破解垃圾处理难题。\n    干部带头齐抓共管，营造全面参与氛围。“我是党员，我带头”，各级党组织高度重视，强化组织领导，真正做到“一把手”亲自抓，层层抓落实，强化组织调度，督促第三方服务单位、物业企业到岗到位，履职尽责。基层党组织要积极发挥垃圾分类管理主体作用，高度重视垃圾分类工作，将垃圾分类作为“一把手工程”，做到亲自过问、亲自部署、亲自检查；带头实施垃圾分类，组织属地城管队、食药所等相关部门，对辖区内居住区和公共机构开展垃圾分类督导检查，共同营造全民参与垃圾分类的良好局面。\n    主动引导群众参与，探索垃圾分类模式。党员干部通过创新方式，寓教于乐，引导群众主动参与垃圾分类。一些地方通过绘制高颜值彩绘墙，“靓”出垃圾分类风景线；或是将“垃圾分类”元素融入剪纸，让居民通过剪纸艺术更直观了解垃圾分类。垃圾变废为宝，小妙招让垃圾分类逐渐深入人心。依法管理政策保障，健全分类长效机制。习近平总书记曾强调，要加快建立分类投放、分类收集、分类运输、分类处理的垃圾处理系统，形成以法治为基础、政府推动、全民参与、城乡统筹、因地制宜的垃圾分类制度。随着新修订的《北京市生活垃圾管理条例》的实施，各级党委要加大推进力度，把垃圾分类纳入地区党建工作内容，形成党建引领、居民自治、居委协调、物业参与的工作格局；成立垃圾分类工作领导小组，完善制度规范、协调部门联动、深入社区基层，通过人性化服务带动精细化管理，提高垃圾分类的社会参与度和正确投放率，着力促进垃圾分类长效机制建设。\n    垃圾分类难度不可小觑，不会一蹴而就，需要全体党员干部拧成一股绳，同心干，引导群众做改善环境的先行者，做保护环境的践行者，大力推进生活垃圾分类，让垃圾分类成为一种习惯，让文明投放垃圾成为一种素养。",
            "imgpath": "image/article1.jpg",
            "status": 1,
            "view": 0,
            "createTime": "2022-05-07T12:21:46.000Z",
            "updateTime": "2022-05-08T12:12:48.000Z"
        },
        ......
    ],
    "code": 200,
    "message": "查询文章成功"     
} 
```
### 1.8.2 添加文章
- 请求路径：article/add
- 请求方法：post
- 请求参数

| 参数名     | 参数说明    |
|---------|---------|
| title  | 文章题目    |
| category   | 文章分类    | 
| introduction | 简介（可为空） | 
| content | 内容（可为空）      | 
| imgpath | 图片路径（可为空）    | 
| status | 是否发布    | 

- 响应数据

```json
{
    "data": null,
    "code": 200,
    "message": "添加文章成功"
} 
```
### 1.8.3 根据id查询文章
- 请求路径：article/find
- 请求方法：get
- 请求参数

| 参数名 | 参数说明 |
|-----|------|
| id  | 文章ID |
- 响应数据

```json
{
    "data": {
        "id": 5,
        "author": "admin",
        "title": "我国厨余垃圾处理的主要技术有哪些",
        "category": "分类知识",
        "introduction": "目前国内厨余垃圾处理技术主要包括好氧发酵制肥技术、厌氧消化技术、脱水协同焚烧技术和生物(黑水虻、家蝇等)转化技术等。",
        "content": "    目前国内厨余垃圾处理技术主要包括好氧发酵制肥技术、厌氧消化技术、脱水协同焚烧技术和生物(黑水虻、家蝇等)转化技术等。根据数据统计显示，国内已建和在建厨余垃圾处理设施中，厌氧消化工艺约占总量的87.5%，其余工艺仅占12.5%。\n    (一)厌氧发酵\n    厌氧发酵是通过多种厌氧微生物(包括厌氧有机物分解菌/不产甲烷厌氧微生物、产甲烷菌等)的新陈代谢，将物料分解转化为甲烷、二氧化碳及发酵残余物(沼渣、沼液)。根据发酵原料固体含量的不同，厌氧发酵主要分为湿式厌氧发酵和干式厌氧发酵。湿式厌氧发酵的固体含量一般在15%以下，干式厌氧发酵装置内固体含量一般大于18%。二者工艺流程并没有显著区别，都是采用“预处理系统+干/湿式厌氧系统”，但两种工艺由于含固率不同，因此其反应器结构形式、停留时间、常用反应温度、沼气产生量等均有一定差异。实际运用中，湿式厌氧技术较干式技术成熟较多，目前国内已建成的厨余垃圾处理厂大部分都采用湿式厌氧技术，但近些年随着生活垃圾分类推进和技术不断成熟，采用干式厌氧发酵技术的项目也在增加。\n    (二)堆肥\n    堆肥也是一种常见的厨余垃圾资源化处理方式，其原理是：在可控条件下，利用微生物的降解作用，实现对厨余垃圾的分解、转化，生成水、土壤腐殖质，以及CO2等气体。根据堆制方式不同，堆肥工艺可分为场地堆积式堆肥和密闭装置式堆肥(生化机)。实际工程应用中，许多堆肥工艺在主发酵阶段采用密闭装置式堆肥工艺(生化机)，而在次发酵阶段采用场地堆积式堆肥工艺。目前厨余垃圾肥料化产品在绿化、农/林应用尚处于起步阶段，缺少系统的质量评价体系，使得后续商业化推广应用难度较大。\n    (三)生物转化技术\n    生物转化技术是通过昆虫生物转化厨余垃圾，保持蛋白质本质，可避免饲料化处理的“同源污染效应”弊端，消除安全隐患。生物转化技术常用黑水虻、蝇蛆等昆虫作为媒介，饲养产出的昆虫幼虫烘干后，可提取昆虫蛋白、昆虫油脂等。目前，采用黑水虻处理餐厨垃圾的技术路线较热，该技术涉及活体养殖，从大规模养殖的工程化角度来讲，还有很多需要研究和优化的地方。",
        "imgpath": "image/article4.jpg",
        "status": 1,
        "view": 0,
        "createTime": "2022-05-07T15:33:00.000Z",
        "updateTime": "2022-05-15T10:58:38.000Z"
    },
    "code": 200,
    "message": "查询文章成功"
}
```
### 1.8.4 编辑文章
- 请求路径：article/update
- 请求方法：post
- 请求参数

| 参数名     | 参数说明    |
|---------|---------|
| id  | 文章ID |
| title  | 文章题目    |
| category   | 文章分类    | 
| introduction | 简介（可为空） | 
| content | 内容（可为空）      | 
| imgpath | 图片路径（可为空）    | 
| status | 是否发布    | 

- 响应数据

```json
{
    "data": null,
    "code": 200,
    "message": "更新文章成功"
} 
```
### 1.8.5 更改文章发布状态
- 请求路径：article/update/status
- 请求方法：post
- 请求参数

| 参数名     | 参数说明    |
|---------|---------|
| id  | 文章ID |
| status | 是否发布    | 

- 响应数据

```json
{
    "data": null,
    "code": 200,
    "message": "更新文章状态成功"
} 
```
### 1.8.6 删除文章
- 请求路径：article/delete
- 请求方法：post
- 请求参数

| 参数名     | 参数说明    |
|---------|---------|
| id  | 文章ID |

- 响应数据

```json
{
    "data": null,
    "code": 200,
    "message": "删除文章成功"
} 
```
### 1.8.6 文章分类
- 请求路径：article/category
- 请求方法：get
- 响应数据

```json
{
    "data": [
        {
            "id": 1,
            "typename": "分类知识",
            "content": "介绍了关于垃圾分类的文章。提高人们垃圾分类意识，培养垃圾分类习惯，增加垃圾分类的知识。"
        },
        {
            "id": 2,
            "typename": "环境保护",
            "content": "环境保护（environmental protection），简称环保，涉及的范围广、综合性强，它涉及自然科学和社会科学的许多领域等，还有其独特的研究对象。环境保护方式包括：采取行政、法律、经济、科学技术、民间自发环保组织等等，合理利用自然资源，防止环境的污染和破坏，以求自然环境同人文环境、经济环境共同平衡可持续发展，扩大有用资源的再生产，保证社会的发展。"
        },
        {
            "id": 3,
            "typename": "新闻资讯",
            "content": "有关垃圾的新闻资讯。大多来自各省份新闻网，以及热门新闻报刊。"
        },
        {
            "id": 4,
            "typename": "垃圾竞赛",
            "content": "统计了各个垃圾分类竞赛的信息。"
        },
        {
            "id": 5,
            "typename": "综合类型",
            "content": " 综合类型文章。"
        }
    ],
    "code": 200,
    "message": "查询文章分类成功"
}
```
**/find ; /update ; /add ; /delete 略**
## 1.9 数据报表
- 请求路径：chart/:type
- 请求方法：get
- 请求参数

| 参数名   | 参数说明                      |
|-------|---------------------------|
| :type | 数据类型（1：易错题目统计 ； 2：垃圾搜索次数） |
- 响应数据

```json
{
    "data": [
        {
            "id": 1,
            "title": "未分类的混合垃圾含有（  ）以上的厨余垃圾",
            "A": 32,
            "B": 70,
            "C": 17,
            "D": 55,
            "rate": 90.23,
            "daan": "C"
        },
        {
            "id": 2,
            "title": "保鲜膜属于 （ ）",
            "A": 25,
            "B": 45,
            "C": 15,
            "D": 50,
            "rate": 88.89,
            "daan": "C"
        },
        ......
    ],
    "code": 200,
    "message": "查询图表数据成功"
}
```
